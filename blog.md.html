<!doctype html public '-//W3C//DTD HTML 4.0 Transitional //EN'>
<html>
<head>
<title>blog</title>
<meta charset='UTF-8' />
<meta name='generator' content='EverEdit' />
<link href='http://7xpyf5.com1.z0.glb.clouddn.com/static/default.css' rel='stylesheet'></link>
<link href='http://7xpyf5.com1.z0.glb.clouddn.com/static/prettify.css' rel='stylesheet'></link>
<script type='text/javascript' src='http://7xpyf5.com1.z0.glb.clouddn.com/static/prettify.js'></script>
<script type='text/javascript' src='http://7xpyf5.com1.z0.glb.clouddn.com/static/jquery-1.10.2.min.js'></script>
<script type='text/javascript' src='http://7xpyf5.com1.z0.glb.clouddn.com/static/toc.js'></script>
</head>
<body>
<div id='generated-toc'></div>
<h2>日志：</h2>

<h3>日志列表:</h3>

<h4>我的日志:</h4>

<p>返回全部的日志，前台分页。</p>

<p>URL:space.jsp?do=blog&amp;view=me</p>

<pre><code class="json">{
    // 分类信息，可以直接根据ID获取名字。
     "classarr": {
        "0": "默认分类",
        "5": "test",
        "3": "java"
    },
    "actives": {
        "me": " class=\"active\""
    },
    "theurl": "space.jsp?uid=2&amp;do=blog&amp;view=me",
    "count": 3, // 总数
    "list": [
        {
            "noreply": 0,
            "uid": 2,
            "magiccolor": 0,
            "topicid": 0,
            "viewnum": 0,
            "picflag": 0,
            "subject": "测试1", // 标题
            "blogid": 43, // 日志ID
            "pic": "",
            "dateline": 1459305373, // 时间戳/1000
            "password": "",
            "message": "时间测试", // 日志内容
            "username": "guozi",   //  作者
            "replynum": 1,         //  回复数
            "click_5": 0,
            "hot": 1,
            "click_4": 0,
            "click_3": 0,
            "click_2": 0,
            "target_ids": "",
            "click_1": 0,
            "friend": 0,
            "top": 1,             //top 是否置顶,1 取消置顶，2 置顶
            "classid": 0      // 分类的ID 
        }
    ],
    "pricount": 0,
    "searchkey": ""
}</code></pre>

<h4>好友日志</h4>

<p>默认只显示10条记录,加载更多的时候在查询第二页的。</p>

<p>URL:space.jsp?do=blog&amp;view=we&amp;page=2</p>

<p>参数: page表示当前第几页。</p>

<pre><code class="json">{
    "userlist": [   //好友列表
        {
            "uid": 2,
            "fusername": "dudy",
            "num": 12,
            "status": 1,
            "gid": 0,
            "dateline": 1458283102,
            "fuid": 3,
            "note": ""
        },
        {
            "uid": 2,
            "fusername": "admin",
            "num": 6,
            "status": 1,
            "gid": 0,
            "dateline": 1454569534,
            "fuid": 1,
            "note": "您好"
        }
    ],
    "actives": {
        "we": " class=\"active\""
    },
    "theurl": "space.jsp?uid=2&amp;do=blog&amp;view=we",
    "count": 16, // 总数,当前没用。
    "list": [
        {
            "noreply": 0,
            "uid": 3,
            "magiccolor": 0,
            "topicid": 0,
            "viewnum": 0,
            "picflag": 0,
            "subject": "123423",
            "blogid": 21,
            "pic": "",
            "dateline": 2018365485,
            "password": "",
            "message": "12342134234 --------------- test",
            "username": "dudy",
            "replynum": 0,
            "click_5": 0,
            "hot": 0,
            "click_4": 0,
            "click_3": 0,
            "click_2": 0,
            "target_ids": "",
            "click_1": 0,
            "friend": 0,
            "top": 1,
            "classid": 0
        }...

    ],
    "pricount": 0, 
    "searchkey": ""
}</code></pre>

<h3>日志分类:</h3>

<h4>分类列表:</h4>

<p>都有一个默认分类: classid = 0</p>

<p>URL: cp.jsp?ac=class</p>

<pre><code class="json">{
    "dafaultCount":0, //    class0: 默认分类下日志的数量          2016-3-31 16:02:39 更新，新增默认分类的数量
    "list": [
        {
            "uid": 3, //用户的ID 
            "dateline": 1454483433, // 时间
            "count": 0,    // 当前分类下日志的数量
            "classid": 5, // 分类的ID
            "classname": "test" // 分类的名字
        }...
    ]
}</code></pre>

<h4>分类操作:</h4>

<p>全局:
返回结果: msg:"1", 如果msg等于"1"，说明操作成功。错误，msg为具体的出错信息。</p>

<ul>
<li><p>修改：</p>

<blockquote>
  <p>URL: cp.jsp?ac=class&amp;op=edit&amp;classid=6&amp;classname=edit"
  参数:
  ac=class   固定              <br>
  op=edit    固定              <br>
  classid    分类的ID         <br>
  classname  分类的名字      <br>
  结果:     <br>
  ①msg："当前名字已存在。  </p>
</blockquote></li>
<li><p>删除:</p>

<blockquote>
  <p>URL: cp.jsp?ac=class&amp;op=delete&amp;classid=6            <br>
  参数: classid                                       <br>
  结果:                                                          <br>
  ①msg："当前分类下含有日志，不能删除"。 <br></p>
</blockquote></li>
<li><p>新增:</p>

<blockquote>
  <p>URL: cp.jsp?ac=class&amp;op=add&amp;classname=TEST <br>
  参数: classname                            <br>
  结果:                                      <br>
  ①msg："当前名字已存在"。                 <br></p>
</blockquote></li>
</ul>
<script type='text/javascript'>
$(document).ready(function(){
  if($('code').length>0){
    $('code').parent().addClass('prettyprint');
    prettyPrint();
};
});
</script>
</body>
</html>